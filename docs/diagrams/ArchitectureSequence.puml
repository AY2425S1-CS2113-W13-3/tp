@startuml
!include style.puml

Participant "Main" as main
Participant "Ui" as ui UI_COLOUR
Participant "Storage" as storage STORAGE_COLOUR
Participant "Parser" as parser PARSER_COLOUR
Participant "Command" as command COMMAND_COLOUR
Participant "EventList" as event EVENT_COLOUR


main -> storage : loadEvents(events)
activate storage STORAGE_COLOUR
storage --> parser : parseFile(events, FILE_PATH)
activate parser PARSER_COLOUR
parser -> event : addEvent(eventName, time, venue)
activate event EVENT_COLOUR
event --> parser
deactivate event
parser --> storage
deactivate parser
storage -> main
deactivate storage

main -> parser : Parser()
activate parser PARSER_COLOUR
parser --> main : :Parser
deactivate parser

main -> ui : getCommand()
activate ui UI_COLOUR
ui --> main : "add -e event -t 1200 -v venue"
deactivate ui



main -> parser : parseCommand("add -e event -t 1200 -v venue")
activate parser PARSER_COLOUR

create command
parser -> command : AddCommand("event", "1200", "venue")
activate command COMMAND_COLOUR
command --> parser : :AddCommand
deactivate command

parser --> main : command:AddCommand
deactivate parser
destroy parser

main -> command : setData(events:EventList)
activate command COMMAND_COLOUR
command --> main
deactivate command

main -> command : execute()
activate command COMMAND_COLOUR

command -> event : addEvent("event", "1200", "venue")
activate event EVENT_COLOUR
event --> command
deactivate event

command --> main
deactivate command

main -> ui : showOutputToUser(command: Command)
activate ui UI_COLOUR

ui -> command : getMessage()
activate command COMMAND_COLOUR

command --> ui : :String
deactivate command

ui --> main :
deactivate ui

main -> storage : saveEvents(events)
activate storage STORAGE_COLOUR
storage -> event : getList()
activate event EVENT_COLOUR
event --> storage
deactivate event
storage --> main
deactivate storage

@enduml